import fetch from 'node-fetch';

const handler = async (message, { conn, usedPrefix, __dirname, text, isPrems }) => {
  if (usedPrefix === 'a' || usedPrefix === 'A') return;

  try {
    const now = new Date(new Date() + 3600000);

    const weekdayOptions = { weekday: "long" };
    const dayName = now.toLocaleDateString('ar', weekdayOptions);

    const dateOptions = { day: "numeric", month: "long", year: "numeric" };
    const fullDate = now.toLocaleDateString('ar', dateOptions);

    const uptimeMs = process.uptime() * 1000;
    const uptimeStr = clockString(uptimeMs);

    const user = global.db.data.users[message.sender];
    const { money, joincount, exp, limit, level, role } = user;

    const totalUsers = Object.entries(global.db.data.users).length || '0';

    const menuText = `
â”“â” â•¼â”â”â•ƒâŒ¬ã€”ðŸŽ¶ã€•âŒ¬â•„â”â”â•¾ â”â”
â˜â•¼â•¼ð“ª Ù‚Ø§Ø¦Ù€Ù…Ù€Ø© ðŸ“œ Ø§Ù„Ø£Ø´Ù€ØªÙ€Ø±Ø§Ùƒ ð“ªâ•¾â•¾â˜
â”€â”€ â€¢ â—ˆ â€¢ â”€â”€

â‰¼ðŸ’°â‰½ Ø£Ø³Ù€Ø¹Ù€Ø§Ø± Ø§Ù„Ù€Ø£Ø´Ù€ØªÙ€Ø±Ø§Ùƒ â•¿â†¶
â‹„â”â”€â”€â”€â•â—žâ¬ªâ‹‡â¬ªâ—Ÿâ•â”€â”€â”€â”â‹„

ðŸ‡ªðŸ‡¬â•Žâ¯ Ù„Ù„Ù…ØµØ±ÙŠÙŠÙ†:
â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€
âœ¨â•ŽØ³ÙŠØ±ÙØ± 2.5 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 2 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 3 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 5 Ø¬Ø±ÙˆØ¨Ø§Øª ÙÙ…Ø§ ÙÙˆÙ‚ Ø­Ø³Ø¨ Ø§Ù„Ø¶ØºØ· â€” 60 Ø¬Ù†ÙŠÙ‡ / Ø´Ù‡Ø±

âš¡â•ŽØ³ÙŠØ±ÙØ± 5 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 3 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 4 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 10 Ø¬Ø±ÙˆØ¨Ø§Øª ÙÙ…Ø§ ÙÙˆÙ‚ Ø­Ø³Ø¨ Ø§Ù„Ø¶ØºØ· â€” 100 Ø¬Ù†ÙŠÙ‡ / Ø´Ù‡Ø±

ðŸ”¥â•ŽØ³ÙŠØ±ÙØ± 7 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 4 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 6 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 20 Ø¬Ø±ÙˆØ¨ ÙÙ…Ø§ ÙÙˆÙ‚ Ø­Ø³Ø¨ Ø§Ù„Ø¶ØºØ· â€” 180 Ø¬Ù†ÙŠÙ‡ / Ø´Ù‡Ø±

â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€

ðŸ‡¸ðŸ‡¦â•Žâ¯ Ù„Ù„Ø³Ø¹ÙˆØ¯ÙŠÙŠÙ†:
â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€
âœ¨â•ŽØ³ÙŠØ±ÙØ± 2.5 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 2 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 3 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 5 Ø¬Ø±ÙˆØ¨Ø§Øª ÙÙ…Ø§ ÙÙˆÙ‚ â€” 10 Ø±ÙŠØ§Ù„ / Ø´Ù‡Ø±

âš¡â•ŽØ³ÙŠØ±ÙØ± 5 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 3 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 4 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 10 Ø¬Ø±ÙˆØ¨Ø§Øª ÙÙ…Ø§ ÙÙˆÙ‚ â€” 15 Ø±ÙŠØ§Ù„ / Ø´Ù‡Ø±

ðŸ”¥â•ŽØ³ÙŠØ±ÙØ± 7 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 4 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 6 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 20 Ø¬Ø±ÙˆØ¨ ÙÙ…Ø§ ÙÙˆÙ‚ â€” 20 Ø±ÙŠØ§Ù„ / Ø´Ù‡Ø±

â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€

ðŸŒâ•Žâ¯ Ù„Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø®Ù€Ø±Ù‰:
â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€
âœ¨â•ŽØ³ÙŠØ±ÙØ± 2.5 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 2 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 3 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 5 Ø¬Ø±ÙˆØ¨Ø§Øª ÙÙ…Ø§ ÙÙˆÙ‚ â€” 2.5 Ø¯ÙˆÙ„Ø§Ø± / Ø´Ù‡Ø±

âš¡â•ŽØ³ÙŠØ±ÙØ± 5 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 3 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 4 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 10 Ø¬Ø±ÙˆØ¨Ø§Øª ÙÙ…Ø§ ÙÙˆÙ‚ â€” 5 Ø¯ÙˆÙ„Ø§Ø± / Ø´Ù‡Ø±

ðŸ”¥â•ŽØ³ÙŠØ±ÙØ± 7 Ø¬ÙŠØ¬Ø§ Ø±Ø§Ù… / 4 ÙƒÙˆØ± / Ù…Ø³Ø§Ø­Ø© 6 Ø¬ÙŠØ¬Ø§
ÙŠØªØ­Ù…Ù„ 20 Ø¬Ø±ÙˆØ¨ ÙÙ…Ø§ ÙÙˆÙ‚ â€” 7.5 Ø¯ÙˆÙ„Ø§Ø± / Ø´Ù‡Ø±

â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€

Ë¼ ðŸ‘¤Ë¹ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ â•¿â†¶
ðŸ·â•Žâ¯ Ø±Ù‚Ù€Ù… Ø§Ù„Ù…Ù€Ø·Ù€ÙˆØ±: @201063720595

â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€

Ë¼ ðŸ’® Ë¹ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø´Ø±Ø§Ø¡ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø¨ÙˆØª Ø¨Ø¯ÙˆÙ† ØªØ´ÙÙŠØ± = 250 Ø¬Ù†ÙŠÙ‡

â”€â”€â”€â”€â”€â”€ â€¢ âœ¿â  â€¢ â”€â”€â”€â”€â”€â”€

Ë¼ ðŸŒ¸ Ë¹ Ø´Ø±Ø­ ÙƒÙŠÙ ØªØ±Ø¨Ø· Ø§Ù„Ø¨ÙˆØª:
Ø§Ù„Ø¨ÙˆØª Ù…ØªØ§Ø­ Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø±Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ðŸ’»
ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ø±ÙˆØ¨Ø§Øª (ØªØ­Ù…ÙŠÙ„Ø§Øª â€“ Ø£Ù„Ø¹Ø§Ø¨ â€“ ØªØ­ÙˆÙŠÙ„Ø§Øª â€“ Ø£ÙˆØ§Ù…Ø± Ù…ØªÙ†ÙˆØ¹Ø©).
Ø®ÙÙŠÙ Ø¬Ø¯Ù‹Ø§ Ù„ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø£ÙƒØ«Ø± Ù…Ù† 5 Ø¬Ø±ÙˆØ¨Ø§Øª Ø¨Ø¯ÙˆÙ† Ù„Ø§Ø¬ØŒ
ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ø³ÙƒØ±Ø¨ØªÙƒ Ø§Ù„Ø®Ø§Øµ Ø£ÙŠØ¶Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ© Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©.

â”€â”€â”€â”€â”€â”€ â€¢ â—ˆ â€¢ â”€â”€â”€â”€

Ë¼ ðŸ’³ Ë¹ Ø·Ù€Ù€Ø±Ù‚ Ø§Ù„Ù€Ù€Ø¯ÙÙ€Ù€Ø¹ â•¿â†¶
â•­ â‹… â‹… â”€â”€ â‹… â‹… â”€â”€ âœ© â”€â”€ â‹… â‹… â”€â”€ â‹… â‹… â•®
â¶ - PayPal
â· - Vodafone Cash
â¸ - VISA
â¹ - IBAN
âº - Al Rajhi
â•°â‹… â‹… â”€â”€ â‹… â‹… â”€â”€ âœ© â”€â”€ â‹… â‹… â”€â”€ â‹… â‹… â•¯`.trim();

    const mentions = [
      message.sender,
      "201063720595@s.whatsapp.net"
    ];

    const contactMessage = {
      key: {
        participants: "0@s.whatsapp.net",
        remoteJid: "status@broadcast",
        fromMe: false,
        id: "Halo"
      },
      message: {
        contactMessage: {
          vcard: `BEGIN:VCARD
VERSION:3.0
N:Sy;Bot;;;
FN:y
item1.TEL;waid=${message.sender.split('@')[0]}:${message.sender.split('@')[0]}
item1.X-ABLabel:Ponsel
END:VCARD`
        }
      },
      participant: "0@s.whatsapp.net"
    };

    const image = { url: "https://files.catbox.moe/icnjcp.jpg" };

    await conn.sendMessage(
      message.chat,
      {
        image,
        caption: menuText,
        mentions
      },
      {
        quoted: message.isGroup ? message : contactMessage
      }
    );

  } catch (err) {
    console.error(err);
    conn.reply(message.chat, "*â— Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŒ Ø¨Ù„Øº Ø§Ù„Ù…Ø·ÙˆØ±.*", message);
  }
};

handler.command = /^(Ø§Ø´ØªØ±Ùƒ|Ø§Ø´ØªØ±Ø§Ùƒ)$/i;
handler.exp = 50;
handler.fail = null;

export default handler;

function clockString(ms) {
  const h = isNaN(ms) ? '--' : Math.floor(ms / 3600000);
  const m = isNaN(ms) ? '--' : Math.floor(ms / 60000) % 60;
  const s = isNaN(ms) ? '--' : Math.floor(ms / 1000) % 60;
  return [h, m, s].map(v => v.toString().padStart(2, '0')).join(':');
}